<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πà‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</title>

<style>
body{
    margin:0;
    min-height:100vh;
    font-family: Arial, sans-serif;
    color:white;

    background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-size: cover;
}


.container{
    max-width:900px;
    margin:auto;
}

h1{
    margin-bottom:20px;
}

.top-buttons{
    margin-bottom:20px;
}

.top-buttons a{
    text-decoration:none;
    padding:8px 15px;
    border-radius:8px;
    background:#6c63ff;
    color:white;
    margin-right:10px;
}

input, textarea{
    width:100%;
    padding:10px;
    margin-bottom:10px;
    border-radius:8px;
    border:none;
}

button{
    padding:10px 18px;
    border:none;
    border-radius:8px;
    cursor:pointer;
}

.add-btn{
    background:#00c6ff;
    color:white;
}

.card{
    background:#1e2a38;
    padding:15px;
    border-radius:10px;
    margin-top:15px;
}

.card button{
    background:#ff4d4d;
    color:white;
    margin-top:10px;
}
.modal {
  display: none;
  position: fixed;
  z-index: 9999;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.9);
  text-align: center;
}

.modal-content {
  max-width: 90%;
  max-height: 80%;
  margin-top: 40px;
  border-radius: 15px;
}

.close {
  position: absolute;
  top: 20px;
  right: 40px;
  color: white;
  font-size: 40px;
  cursor: pointer;
}

.download-btn {
  display: inline-block;
  margin-top: 20px;
  padding: 12px 25px;
  background: #00c6ff;
  color: white;
  text-decoration: none;
  border-radius: 30px;
  font-size: 18px;
}

</style>
</head>

<body>

<div class="container">

<h1>üõ† ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πà‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</h1>

<div class="top-buttons">
    <a href="admin-events.html">üìÖ ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</a>
    <a href="menu.html">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
</div>

<input id="title" placeholder="‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Ç‡πà‡∏≤‡∏ß">
<textarea id="text" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡πà‡∏≤‡∏ß"></textarea>
<input type="file" id="media" accept="image/*,video/*">

<button class="add-btn" onclick="addNews()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πà‡∏≤‡∏ß</button>

<div id="list"></div>

</div>

<script>
    function openImage(src){
  document.getElementById("imageModal").style.display = "block";
  document.getElementById("modalImg").src = src;
  document.getElementById("downloadBtn").href = src;
}

function closeImage(){
  document.getElementById("imageModal").style.display = "none";
}

let news = JSON.parse(localStorage.getItem("news")) || [];
const list = document.getElementById("list");

function render(){
    list.innerHTML = "";

    news.forEach((n,i)=>{
        list.innerHTML += `
        <div class="card">
            <h3>${n.title}</h3>
            <p>${n.text}</p>
            ${n.media || ""}
            <br>
            <button onclick="del(${i})">‡∏•‡∏ö</button>
        </div>
        `;
    });
}

function addNews(){
    const title = document.getElementById("title").value;
    const text = document.getElementById("text").value;
    const file = document.getElementById("media").files[0];

    if(!title || !text){
        alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
        return;
    }

    if(file){
        const reader = new FileReader();

        reader.onload = function(e){
            let media;

            if(file.type.startsWith("video")){
                media = `<video controls width="300" src="${e.target.result}"></video>`;
            }else{
            media = `
<img width="300"
     style="cursor:pointer;border-radius:10px;"
     src="${e.target.result}"
     onclick="openImage('${e.target.result}')">
`;

            }

            saveNews(title,text,media);
        };

        reader.readAsDataURL(file);
    }else{
        saveNews(title,text,"");
    }
}

function saveNews(title,text,media){
    news.unshift({title,text,media});
    localStorage.setItem("news",JSON.stringify(news));
    render();

    document.getElementById("title").value="";
    document.getElementById("text").value="";
    document.getElementById("media").value="";
}

function del(i){
    news.splice(i,1);
    localStorage.setItem("news",JSON.stringify(news));
    render();
}

render();
</script>
<div id="imageModal" class="modal">
  <span class="close" onclick="closeImage()">&times;</span>

  <img class="modal-content" id="modalImg">

  <a id="downloadBtn"
     class="download-btn"
     download="image.jpg">
     ‚¨á ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ
  </a>
</div>

</body>
</html>
