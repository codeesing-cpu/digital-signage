<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πà‡∏≤‡∏ß</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    .btn{
    display:inline-block;
    padding:10px 18px;
    background:linear-gradient(135deg,#667eea,#764ba2);
    color:white;
    border-radius:10px;
    text-decoration:none;
    margin-bottom:15px;
    transition:.2s;
}
.btn:hover{
    transform:scale(1.05);
}

body {
    font-family: Kanit, sans-serif;
    background: #16222a;
    color: white;
    margin: 0;
}
.container {
    max-width: 900px;
    margin: auto;
    padding: 20px;
}
input, textarea {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 10px;
    border: none;
}
button {
    padding: 10px 20px;
    border-radius: 20px;
    border: none;
    background: #00c6ff;
    color: black;
    cursor: pointer;
}
.card {
    background: rgba(255,255,255,0.1);
    padding: 15px;
    border-radius: 15px;
    margin-top: 15px;
}
</style>
</head>
<body>

<div class="container">
<h1>üõ† ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πà‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</h1>


    <!-- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ -->
    <a href="admin-events.html" class="btn">üìÖ ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</a>


<input id="title" placeholder="‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Ç‡πà‡∏≤‡∏ß">
<textarea id="text" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡πà‡∏≤‡∏ß"></textarea>
<input type="file" id="media" accept="image/*,video/*">
<img id="preview"
     style="width:300px; display:none; border-radius:10px; margin-top:10px;">

<button onclick="addNews()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πà‡∏≤‡∏ß</button>

<div id="list"></div>

<a href="menu.html">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π</a>
</div>

<script>
let news = JSON.parse(localStorage.getItem("news")) || [];

const list = document.getElementById("list");
const titleInput = document.getElementById("title");
const textInput = document.getElementById("text");
const mediaInput = document.getElementById("media");
const preview = document.getElementById("preview");

function render() {
    list.innerHTML = "";

    news.forEach((n, i) => {
     list.innerHTML += `
        <div class="card">
            <b>${n.title}</b>
            <p>${n.text}</p>
            ${n.media}
            <button onclick="del(${i})">üóë ‡∏•‡∏ö</button>
        </div>`;
    });
}

function addNews() {
    const title = titleInput.value;
    const text = textInput.value;
    const file = mediaInput.files[0];

    let media = "";

    if (file) {
        const reader = new FileReader();

        reader.onload = function(e) {
            const base64 = e.target.result;


           if(file.type.includes("video")){
                media = `<video controls width="300" src="${base64}"></video>`;
            } else {
                media = `<img width="300" src="${base64}">`;
            }

            saveNews(title, text, media);
        };

        reader.readAsDataURL(file);

    } else {
        saveNews(title, text, "");
    }
}

function saveNews(title, text, media){
    news.unshift({ title, text, media });

    localStorage.setItem("news", JSON.stringify(news));

    render();

    titleInput.value = "";
    textInput.value = "";
    mediaInput.value = "";
    preview.style.display = "none";
}

function del(i) {
    news.splice(i, 1);
    localStorage.setItem("news", JSON.stringify(news));
    render();
}

mediaInput.addEventListener("change", function () {
    const file = mediaInput.files[0];

    
if (file) {
    const reader = new FileReader();

    reader.onload = function(e) {
        const base64 = e.target.result;

        if (file.type.includes("video")) {
            media = `<video controls width="300" src="${base64}"></video>`;
        } else {
            media = `<img width="300" src="${base64}">`;
        }

        saveNews(title, text, media);
    };

    reader.readAsDataURL(file);

} else {
    saveNews(title, text, "");
}


});

render();
</script>

</body>
</html>
